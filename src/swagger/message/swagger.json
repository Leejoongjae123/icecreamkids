{"openapi":"3.0.1","info":{"title":"Message API","description":"isd / kinder board api doc","version":"v1.1.0"},"servers":[{"url":"http://3.37.227.162:8080","description":"dev server via bastion"},{"url":"https://reverse-proxy.dev.i-screamdrive.com","description":"temp proxy server"},{"url":"http://localhost:8080","description":"local server"}],"tags":[{"name":"인증용 sms 관련 api","description":"sms 인증용 코드 발송과 확인을 하는 api"},{"name":"인증절차 없이 사용가능한 api 모음","description":"인증절차를 거치지 않아도 되는 api 모아둡니다."}],"paths":{"/message/v1/notifications-to/{profileId}/mark-as-read":{"put":{"tags":["notification-to-controller"],"operationId":"markAsReadAll","parameters":[{"name":"profileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/message/v1/notifications-to/{profileId}/mark-as-read-all":{"put":{"tags":["notification-to-controller"],"operationId":"markAsReadAll_1","parameters":[{"name":"profileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/message/v1/message-counters/{profileId}/new-notified/mark-as-checked":{"put":{"tags":["message-counter-controller"],"operationId":"newNotifiedMarkAsChecked","parameters":[{"name":"profileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseString"}}}}}}},"/message/v1/sms/validation/request":{"post":{"tags":["인증용 sms 관련 api"],"summary":"인증코드 발송 요청","description":"sms로 인증코드를 발송합니다. 개발서버에선 codeId에 그냥 인증코드 전달 드립니다.","operationId":"requestValidate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsUserValidateSendRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseSmsUserValidateSendResponse"}}}}}}},"/message/v1/sms/validation/code":{"post":{"tags":["인증용 sms 관련 api"],"summary":"인증코드 발송된 인증코드를 검증하는 api","description":"인증코드와 발송한 번호로 검증을 진행합니다.","operationId":"validateCode","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsUserValidateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseUserValidationCodeState"}}}}}}},"/message/v1/notifications":{"post":{"tags":["notification-controller"],"operationId":"add","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotificationRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLong"}}}}}}},"/message/open-api/v1/sms/validation/request":{"post":{"tags":["인증절차 없이 사용가능한 api 모음"],"summary":"인증코드 발송 요청","description":"sms로 인증코드를 발송합니다. 개발서버에선 codeId에 그냥 인증코드 전달 드립니다.","operationId":"requestValidate_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsUserValidateSendRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseSmsUserValidateSendResponse"}}}}}}},"/message/open-api/v1/sms/validation/code":{"post":{"tags":["인증절차 없이 사용가능한 api 모음"],"summary":"인증코드 발송된 인증코드를 검증하는 api","description":"인증코드와 발송한 번호로 검증을 진행합니다.","operationId":"validateCode_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SmsUserValidateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseUserValidationCodeState"}}}}}}},"/message/v1/notifications-to/{profileId}/read":{"get":{"tags":["notification-to-controller"],"operationId":"reads","parameters":[{"name":"profileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"size","in":"query","required":false,"schema":{"maximum":100,"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseNotificationPageListableResult"}}}}}}},"/message/v1/notifications-to/{profileId}/not-read":{"get":{"tags":["notification-to-controller"],"operationId":"notReads","parameters":[{"name":"profileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"size","in":"query","required":false,"schema":{"maximum":100,"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseNotificationPageListableResult"}}}}}}},"/message/v1/message-counters/{profileId}/new-notified":{"get":{"tags":["message-counter-controller"],"operationId":"newNotified","parameters":[{"name":"profileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseInteger"}}}}}}}},"components":{"schemas":{"ApiResponseString":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","format":"int32"},"result":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"error":{"type":"string"},"debug":{"type":"string"}}},"SmsUserValidateSendRequest":{"required":["expiredIn","ip","phoneNumber"],"type":"object","properties":{"phoneNumber":{"type":"string","description":"국가코드를 포함한 사용자 핸드폰 번호(010으로 보내도 되도록 수정)","example":"+8210XXXXYYYY"},"ip":{"type":"string","description":"발송요청한 클라이언트 ip"},"expiredIn":{"maximum":10,"minimum":1,"type":"integer","description":"제한 시간 분수, 기본 3분","format":"int32","example":3,"default":3}}},"ApiResponseSmsUserValidateSendResponse":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","format":"int32"},"result":{"$ref":"#/components/schemas/SmsUserValidateSendResponse"},"timestamp":{"type":"string","format":"date-time"},"error":{"type":"string"},"debug":{"type":"string"}}},"SmsUserValidateSendResponse":{"required":["codeId","expiredAt"],"type":"object","properties":{"codeId":{"type":"integer","format":"int64"},"expiredAt":{"type":"string","format":"date-time"}}},"SmsUserValidateRequest":{"required":["phoneNumber","validateCode"],"type":"object","properties":{"phoneNumber":{"type":"string","description":"발송 요청했던 국가코드를 포함한 사용자 핸드폰 번호","example":"+8210XXXXYYYY"},"validateCode":{"type":"string","description":"요청했던 번호로 전송된 인증 코드"}}},"ApiResponseUserValidationCodeState":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","format":"int32"},"result":{"type":"string","enum":["REQUESTED","VALIDATED","EXPIRED","ALREADYVALIDATED","NOTMATCHED","FAILED"]},"timestamp":{"type":"string","format":"date-time"},"error":{"type":"string"},"debug":{"type":"string"}}},"NotificationRequest":{"required":["body","displayProfileId","receiverProfileId"],"type":"object","properties":{"receiverProfileId":{"type":"integer","format":"int64"},"displayProfileId":{"type":"integer","format":"int64"},"displayProfileName":{"maxLength":40,"minLength":0,"type":"string"},"displayProfilePhotoUrl":{"maxLength":255,"minLength":0,"type":"string"},"body":{"maxLength":255,"minLength":0,"type":"string"}}},"ApiResponseLong":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","format":"int32"},"result":{"type":"integer","format":"int64"},"timestamp":{"type":"string","format":"date-time"},"error":{"type":"string"},"debug":{"type":"string"}}},"ApiResponseNotificationPageListableResult":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","format":"int32"},"result":{"$ref":"#/components/schemas/NotificationPageListableResult"},"timestamp":{"type":"string","format":"date-time"},"error":{"type":"string"},"debug":{"type":"string"}}},"NotificationPageListableResult":{"required":["items","nextOffset","size"],"type":"object","properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/NotificationResult"}},"size":{"type":"integer","format":"int32"},"nextOffset":{"type":"integer","format":"int64"}}},"NotificationResult":{"required":["body","displayProfileId","id","receiverProfileId","sentAt"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"receiverProfileId":{"type":"integer","format":"int64"},"displayProfileId":{"type":"integer","format":"int64"},"displayProfileName":{"type":"string"},"displayProfilePhotoUrl":{"type":"string"},"body":{"type":"string"},"sentAt":{"type":"string","format":"date-time"},"readAt":{"type":"string","format":"date-time"}}},"ApiResponseInteger":{"required":["status"],"type":"object","properties":{"status":{"type":"integer","format":"int32"},"result":{"type":"integer","format":"int32"},"timestamp":{"type":"string","format":"date-time"},"error":{"type":"string"},"debug":{"type":"string"}}}}}}